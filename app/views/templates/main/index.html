<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>庫存即時看板</title>
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='favicon.svg') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='index.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="dashboard">
        <!-- 頂部標題列 -->
        <header class="header">
            <div class="header-left">
                <div class="logo-area">
                    <img src="{{ url_for('static', filename='logo.jpg') }}" alt="協鴻" class="company-logo"
                        onerror="this.style.display='none'">
                </div>
                <h1 id="appTitle">協鴻工業 加工鑄件看板系統</h1>
                <nav class="main-nav">
                    <a href="{{ url_for('main.index') }}" class="nav-link active" id="navInventory">庫存看板</a>
                    <a href="{{ url_for('main.orders_page') }}" class="nav-link" id="navOrders">工單需求</a>
                </nav>
            </div>
            <div class="header-right">
                <button id="langSwitch" class="lang-btn" onclick="toggleLanguage()">EN</button>
                <div class="update-info">
                    <span class="status-dot"></span>
                    <span id="lastUpdate">載入中...</span>
                </div>
            </div>
        </header>

        <!-- 主要內容區 -->
        <main class="main-content">
            <!-- 供需分析區 -->
            <section class="section supply-demand">
                <h2 class="section-title" id="titleSupplyDemand">📊 供需即時分析</h2>
                <div class="cards-grid" id="supplyDemandCards">
                    <!-- 動態生成 -->
                </div>
            </section>

            <!-- 庫存總覽區 -->
            <section class="section inventory-overview">
                <h2 class="section-title" id="titleOverview">📦 鑄件庫存總覽</h2>
                <div class="inventory-grid" id="inventoryGrid">
                    <!-- 動態生成 -->
                </div>
            </section>

            <!-- 庫存明細區 -->
            <section class="section inventory-details">
                <h2 class="section-title" id="titleDetails">📝 機型庫存明細</h2>
                <div class="details-table-wrapper">
                    <table class="details-table" id="detailsTable">
                        <thead>
                            <tr>
                                <th id="thModel">機型</th>
                                <th id="thWorktable">工作台</th>
                                <th id="thBase">底座</th>
                                <th id="thCrossbeam">橫樑</th>
                                <th id="thColumn">立柱</th>
                            </tr>
                        </thead>
                        <tbody id="detailsTableBody">
                            <!-- 動態生成 -->
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>

    <!-- 工作台細節彈出視窗 -->
    <div id="worktableModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h2>🔳 工作台詳細製程追蹤</h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <div class="loading">載入中...</div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>

</html>