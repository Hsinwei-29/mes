<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åº«å­˜å³æ™‚çœ‹æ¿</title>
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='favicon.svg') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='index.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='stock_buttons.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="dashboard">
        <!-- é ‚éƒ¨æ¨™é¡Œåˆ— -->
        <header class="header">
            <div class="header-left">
                <div class="logo-area">
                    <img src="{{ url_for('static', filename='logo.jpg') }}" alt="å”é´»" class="company-logo"
                        onerror="this.style.display='none'">
                </div>
                <h1 id="appTitle">å”é´»å·¥æ¥­ åŠ å·¥é‘„ä»¶çœ‹æ¿ç³»çµ±</h1>
                <nav class="main-nav">
                    <a href="{{ url_for('main.index') }}" class="nav-link active" id="navInventory">åº«å­˜çœ‹æ¿</a>
                    <a href="{{ url_for('main.orders_page') }}" class="nav-link" id="navOrders">å·¥å–®éœ€æ±‚</a>
                    <a href="{{ url_for('main.shortage_page') }}" class="nav-link" id="navShortage">ç¼ºæ–™åˆ†æ</a>
                </nav>
            </div>
            <div class="header-right">
                <button id="langSwitch" class="lang-btn" onclick="toggleLanguage()">EN</button>
                {% if current_user.is_authenticated %}
                <a href="{{ url_for('auth.profile') }}" class="lang-btn" style="margin-left: 0.5rem;">âš™ï¸ å€‹äººè³‡æ–™</a>
                {% if current_user.is_admin() %}
                <a href="{{ url_for('auth.admin_dashboard') }}" class="lang-btn" style="margin-left: 0.5rem;">ğŸ‘¤ ç®¡ç†å“¡</a>
                {% endif %}
                <a href="{{ url_for('auth.logout') }}" class="lang-btn" style="margin-left: 0.5rem;">ç™»å‡º</a>
                {% else %}
                <a href="{{ url_for('auth.login') }}" class="lang-btn" style="margin-left: 0.5rem;">ç™»å…¥</a>
                {% endif %}
                <div class="update-info">
                    <span class="status-dot"></span>
                    <span id="lastUpdate">è¼‰å…¥ä¸­...</span>
                </div>
            </div>
        </header>

        <!-- ä¸»è¦å…§å®¹å€ -->
        <main class="main-content">
            <!-- ä¾›éœ€åˆ†æå€ -->
            <section class="section supply-demand">
                <h2 class="section-title" id="titleSupplyDemand">ğŸ“Š ä¾›éœ€å³æ™‚åˆ†æ</h2>
                <div class="cards-grid" id="supplyDemandCards">
                    <!-- å‹•æ…‹ç”Ÿæˆ -->
                </div>
            </section>

            <!-- åº«å­˜ç¸½è¦½å€ -->
            <section class="section inventory-overview">
                <h2 class="section-title" id="titleOverview">ğŸ“¦ é‘„ä»¶åº«å­˜ç¸½è¦½</h2>
                <div class="inventory-grid" id="inventoryGrid">
                    <!-- å‹•æ…‹ç”Ÿæˆ -->
                </div>
            </section>

            <!-- åº«å­˜æ˜ç´°å€ -->
            <section class="section inventory-details">
                <h2 class="section-title" id="titleDetails">ğŸ“ æ©Ÿå‹åº«å­˜æ˜ç´°</h2>
                <div class="details-table-wrapper">
                    <table class="details-table" id="detailsTable">
                        <thead>
                            <tr>
                                <th id="thModel">æ©Ÿå‹</th>
                                <th id="thWorktable">å·¥ä½œå°</th>
                                <th id="thBase">åº•åº§</th>
                                <th id="thCrossbeam">æ©«æ¨‘</th>
                                <th id="thColumn">ç«‹æŸ±</th>
                            </tr>
                        </thead>
                        <tbody id="detailsTableBody">
                            <!-- å‹•æ…‹ç”Ÿæˆ -->
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>

    <!-- å·¥ä½œå°ç´°ç¯€å½ˆå‡ºè¦–çª— -->
    <div id="worktableModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h2>ğŸ”³ å·¥ä½œå°è©³ç´°è£½ç¨‹è¿½è¹¤</h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <div class="loading">è¼‰å…¥ä¸­...</div>
            </div>
        </div>
    </div>

    <!-- ä¾›éœ€è©³ç´°è³‡è¨Šå½ˆå‡ºè¦–çª— -->
    <div id="supplyDetailModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h2 id="supplyModalTitle">åœ¨è£½å“æˆå“æ˜ç´°</h2>
                <button class="modal-close" onclick="closeSupplyDetailModal()">&times;</button>
            </div>
            <div class="modal-body" id="supplyModalBody">
                <div class="loading">è¼‰å…¥ä¸­...</div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='app.js') }}?v=20260204_2300"></script>
</body>

</html>